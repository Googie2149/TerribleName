// fuck reddit enhancement suite!
.res {
   #header-bottom-right.res-navTop {
      top: auto !important;
      bottom: 0px !important;

      #userbarToggle {
         background: none !important;
         border: none !important;
         color: inherit !important;
         padding: 0px !important;

         &.userbarShow {
            bottom: 4px !important;
            top: auto !important;
         }
      }
   }

   .RES-keyNav-activeElement,
   .commentarea .RES-keyNav-activeElement .md,
   .commentarea .RES-keyNav-activeElement.entry .noncollapsed {
      background: none !important;
      position: relative;
   }

   .RES-keyNav-activeElement {
      border-right: solid 4px $res-active-element-bg;
   }


   .subButtons {
      padding: 1em 0em !important;
   }

   .RESshortcutside,
   .RESDashboardToggle {
      &,
      &.remove {
         @extend .tn-button;
         font-size: 13px !important;
         display: inline-block !important;
      }
   }

   #RESShortcutsEditContainer,
   #RESShortcutsSort,
   #RESShortcutsAdd,
   #RESShortcutsRight,
   #RESShortcutsLeft,
   #RESShortcutsTrash {
      background: transparent !important;
   }

   #RESShortcutsSort,
   #RESShortcutsAdd,
   #RESShortcutsRight,
   #RESShortcutsLeft,
   #RESShortcutsTrash {
      color: $sr-header-fg;
      font-size: 13px;
   }

   .expando-button.toggleImage.image {
      @extend .expando-button;
      &.collapsedExpando {
         @extend .expando-button.selftext.collapsed;
      }

      // wtf is this shit?
      &.collapsed.expanded {
         @extend .expando-button.selftext.expanded;
      }
   }
}

.res-nightmode {
   body {
      color: $res-night-fg;

      &,
      .content {
         background: $res-night-bg url($res-night-bg-image) left top repeat !important;
      }
   }

   .md {
      pre,
      code,
      blockquote {
         background: lighten($res-night-bg, 6%);
      }
   }

   // yay! selector racing!!!
   // why the fuck do i have to do this shit?!
   &.res {
      > #header {
         background: $header-bg url($header-bg-image) left top no-repeat !important;
         > #header-bottom-left {
            background: none !important;
         }
      }
   }

   .infobar,
   .linkinfo,
   .content.submit,
   .subscribers,
   .users-online,
   .info-notice {
      background: lighten($res-night-bg, 10%) !important;
      border: solid 1px lighten($res-night-bg, 20%) !important;
      @include shadow(none);
   }

   .subscribers,
   .users-online {
      width: 137px;
   }

   .side .spacer > #search input,
   #newlink.submit .formtabs-content .roundfield-content textarea,
   #newlink.submit .formtabs-content .roundfield-content input#url,
   #newlink.submit .formtabs-content .roundfield-content input#sr-autocomplete,
   textarea,
   input[type=text],
   .usertext > .usertext-edit > div > textarea,
   .usertext-edit.viewSource > div > textarea,
   input[type=password] {
      background: $res-night-bg !important;
      color: darken($res-night-fg, 30%) !important;
      border: solid 1px lighten($res-night-bg, 17%) !important;
      @include shadow(none);
   }

   #header {

      #sr-header-area {
         background: $sr-header-bg !important;
         color: $sr-header-fg;
      }

      #header-bottom-left {
         background: none !important;
         .tabmenu {
            .selected {
               a {
                  padding-bottom: 8px !important;
               }
            }
         }
      }

      #header-bottom-right {
         background: none !important;
      }
   }

   .side {
      background: none !important;
      margin: 1em 1em 1em 2em !important;

      .titlebox,
      .sidebox,
      .sidebox .spacer,
      .leavemoderator,
      .titlebox form.flairtoggle {
         background: none !important;
      }

      .sidebox {
         border: none !important;
         overflow: visible !important;
         @include rounded(0px);
      }

      .morelink {
         a {
            color: $button-fg;
            &:focus {
               outline: none !important;
            }

            &:active {
               @include shadow(inset 0px 2px 2px darken($button-bg, 20%), 0px 1px 1px lighten($res-night-bg, 13%));
            }
         }
      }

      .icon-menu {
         a {
            background-color: transparent;
            &:hover {
               @include linear-gradient(top, lighten($res-night-bg, 10%), lighten($res-night-bg, 5%));
            }
         }
      }
   }

   #siteTable.linklisting {
      .thing {
         background: none !important;

         &:not(:first-child) {
            border-top: solid 1px darken($res-night-bg, 4%) !important;
            @include shadow(inset 0px 1px 0px lighten($res-night-bg, 8%));
         }

         .entry {
            > .title {
               > a.title {
                  &,
                  &.loggedin {
                     color: $link-fg !important;
                  }
               }

               > .domain > a {
                  color: darken($res-night-fg, 30%) !important;
               }
            }

            .expando-button {
               &.collapsed,
               &.expanded {
                  &,
                  &:hover {
                     background: lighten($res-night-bg, 10%) !important;
                  }
               }

               &.toggleImage.image.collapsed.expanded
               &.expanded {
                  @include shadow(none);
               }
            }

            &.RES-keyNav-activeElement {
               background: none !important;
               .usertext > .usertext-body .md p {
                  background: none !important;
               }
            }
         }

         &.stickied .RES-keyNav-activeElement.entry > .title > a,
         &.stickied .entry > .title > a {
            &,
            &.loggedin {
               color: $sticky-link-fg !important;
            }
         }

         .stickied-tagline {
            background: darken($sticky-tag-bg, 15%);
         }

         .thumbnail {
            &::before {
               color: rgba(255, 255, 255, 0.3);
               text-shadow: none;
            }

            &.default::before {
               background-color: lighten($res-night-bg, 10%);
            }

            img {
               background-color: lighten($res-night-bg, 20%);
            }
         }
      }
   }


   .submit-page {
      .tabmenu.formtab {
         > li {
            > a {
               background: lighten($res-night-bg, 10%);
               color: darken($res-night-fg, 30%) !important;
               border: none !important;
               @include rounded(3px);
            }

            &.selected {
               > a {
                  background: lighten($res-night-bg, 20%);
                  color: $res-night-fg !important;
                  border: none !important;
                  @include shadow(none);

                  &::after {
                     display: none;
                  }
               }
            }
         }
      }

      #newlink.submit.content {
         background: lighten($res-night-bg, 3%) !important;
         .formtabs-content,
         .roundfield {
            background: none;
            border: none !important;
            @include shadow(none);
         }
      }
   }
}
